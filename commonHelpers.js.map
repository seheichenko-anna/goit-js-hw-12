{"version":3,"file":"commonHelpers.js","sources":["../src/main.js"],"sourcesContent":["import axios from 'axios';\nimport SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\nimport iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\n\nconst form = document.querySelector('.form');\nconst gallery = document.querySelector('.gallery');\nconst loadBtn = document.querySelector('.load-btn');\nlet lightbox;\nlet countPage;\nlet searchValue;\n\nform.addEventListener('submit', onSearchImages);\nloadBtn.addEventListener('click', onLoadImages);\n\nfunction onSearchImages(e) {\n  e.preventDefault();\n  gallery.innerHTML = '';\n  document.querySelector('.loader').classList.remove('hidden');\n  searchValue = form.elements.q.value;\n  countPage = 1;\n  getImages(searchValue)\n    .then(data => {\n      if (data.hits.length === 0) {\n        iziToast.show({\n          message:\n            'Sorry, there are no images matching your search query. Please try again!',\n          position: 'topRight',\n          backgroundColor: '#EF4040',\n          titleColor: '#FFFFFF',\n          messageColor: '#FFFFFF',\n        });\n      } else {\n        renderGallery(data.hits);\n        document.querySelector('.load-btn').classList.remove('hidden');\n      }\n    })\n    .catch(error => console.log(error))\n    .finally(() => {\n      document.querySelector('.loader').classList.add('hidden');\n      form.reset();\n    });\n}\n\nfunction getGalleryItemHeight() {\n  const galleryItem = document.querySelector('.gallery-item');\n  const { height } = galleryItem.getBoundingClientRect();\n  return height;\n}\n\nfunction onLoadImages() {\n  countPage += 1;\n  document.querySelector('.load-btn').classList.add('hidden');\n  document.querySelector('.loader').classList.remove('hidden');\n  const galleryItemHeight = getGalleryItemHeight();\n  getImages()\n    .then(data => {\n      if (data.totalHits - 40 * countPage <= 0) {\n        iziToast.show({\n          message: \"We're sorry, but you've reached the end of search results.\",\n          position: 'topRight',\n          backgroundColor: '#03a9f4',\n          titleColor: '#FFFFFF',\n          messageColor: '#FFFFFF',\n        });\n        document.querySelector('.load-btn').classList.add('hidden');\n      } else {\n        renderGallery(data.hits);\n        document.querySelector('.load-btn').classList.remove('hidden');\n        window.scrollBy({\n          top: galleryItemHeight * 2,\n          left: 0,\n          behavior: 'smooth',\n        });\n      }\n    })\n    .catch(error => console.log(error))\n    .finally(() => {\n      document.querySelector('.loader').classList.add('hidden');\n    });\n}\n\nconst getImages = async function () {\n  const API_KEY = '42001706-084c655b89d9d100c07cefb17';\n  const url = 'https://pixabay.com/api/';\n  const response = await axios.get(url, {\n    params: {\n      key: API_KEY,\n      q: searchValue,\n      image_type: 'photo',\n      orientation: 'horizontal',\n      safesearch: 'true',\n      page: countPage,\n      per_page: 40,\n    },\n  });\n  return response.data;\n};\n\nfunction renderGallery(data) {\n  const markup = data.map(item => {\n    const {\n      webformatURL,\n      largeImageURL,\n      tags,\n      likes,\n      views,\n      comments,\n      downloads,\n    } = item;\n    return `<li class=\"gallery-item\">\n                <a class=\"gallery-link\" href=${largeImageURL}>\n                <img src=${webformatURL} alt=\"${tags}\" /></a>\n                    <ul class=\"image-desc\">\n                        <li class=\"image-desc-item\"><p>Likes</p><p>${likes}</p></li>\n                        <li class=\"image-desc-item\"><p>Views</p><p>${views}</p></li>\n                        <li class=\"image-desc-item\"><p>Comments</p><p>${comments}</p></li>\n                        <li class=\"image-desc-item\"><p>Downloads</p><p>${downloads}</p></li>\n                    </ul>\n            </li>`;\n  });\n\n  addMarkup(markup);\n  lightbox.refresh();\n}\n\nfunction addMarkup(markup) {\n  markup = markup.join('');\n  gallery.insertAdjacentHTML('beforeend', markup);\n  lightbox = new SimpleLightbox('.gallery a', {\n    captionDelay: 250,\n    captionsData: 'alt',\n  });\n}\n"],"names":["form","gallery","loadBtn","lightbox","countPage","searchValue","onSearchImages","onLoadImages","e","getImages","data","iziToast","renderGallery","error","getGalleryItemHeight","galleryItem","height","galleryItemHeight","API_KEY","url","axios","markup","item","webformatURL","largeImageURL","tags","likes","views","comments","downloads","addMarkup","SimpleLightbox"],"mappings":"owBAMA,MAAMA,EAAO,SAAS,cAAc,OAAO,EACrCC,EAAU,SAAS,cAAc,UAAU,EAC3CC,EAAU,SAAS,cAAc,WAAW,EAClD,IAAIC,EACAC,EACAC,EAEJL,EAAK,iBAAiB,SAAUM,CAAc,EAC9CJ,EAAQ,iBAAiB,QAASK,CAAY,EAE9C,SAASD,EAAeE,EAAG,CACzBA,EAAE,eAAc,EAChBP,EAAQ,UAAY,GACpB,SAAS,cAAc,SAAS,EAAE,UAAU,OAAO,QAAQ,EAC3DI,EAAcL,EAAK,SAAS,EAAE,MAC9BI,EAAY,EACZK,EAAqB,EAClB,KAAKC,GAAQ,CACRA,EAAK,KAAK,SAAW,EACvBC,EAAS,KAAK,CACZ,QACE,2EACF,SAAU,WACV,gBAAiB,UACjB,WAAY,UACZ,aAAc,SACxB,CAAS,GAEDC,EAAcF,EAAK,IAAI,EACvB,SAAS,cAAc,WAAW,EAAE,UAAU,OAAO,QAAQ,EAErE,CAAK,EACA,MAAMG,GAAS,QAAQ,IAAIA,CAAK,CAAC,EACjC,QAAQ,IAAM,CACb,SAAS,cAAc,SAAS,EAAE,UAAU,IAAI,QAAQ,EACxDb,EAAK,MAAK,CAChB,CAAK,CACL,CAEA,SAASc,GAAuB,CAC9B,MAAMC,EAAc,SAAS,cAAc,eAAe,EACpD,CAAE,OAAAC,CAAM,EAAKD,EAAY,sBAAqB,EACpD,OAAOC,CACT,CAEA,SAAST,GAAe,CACtBH,GAAa,EACb,SAAS,cAAc,WAAW,EAAE,UAAU,IAAI,QAAQ,EAC1D,SAAS,cAAc,SAAS,EAAE,UAAU,OAAO,QAAQ,EAC3D,MAAMa,EAAoBH,IAC1BL,EAAW,EACR,KAAKC,GAAQ,CACRA,EAAK,UAAY,GAAKN,GAAa,GACrCO,EAAS,KAAK,CACZ,QAAS,6DACT,SAAU,WACV,gBAAiB,UACjB,WAAY,UACZ,aAAc,SACxB,CAAS,EACD,SAAS,cAAc,WAAW,EAAE,UAAU,IAAI,QAAQ,IAE1DC,EAAcF,EAAK,IAAI,EACvB,SAAS,cAAc,WAAW,EAAE,UAAU,OAAO,QAAQ,EAC7D,OAAO,SAAS,CACd,IAAKO,EAAoB,EACzB,KAAM,EACN,SAAU,QACpB,CAAS,EAET,CAAK,EACA,MAAMJ,GAAS,QAAQ,IAAIA,CAAK,CAAC,EACjC,QAAQ,IAAM,CACb,SAAS,cAAc,SAAS,EAAE,UAAU,IAAI,QAAQ,CAC9D,CAAK,CACL,CAEA,MAAMJ,EAAY,gBAAkB,CAClC,MAAMS,EAAU,qCACVC,EAAM,2BAYZ,OAXiB,MAAMC,EAAM,IAAID,EAAK,CACpC,OAAQ,CACN,IAAKD,EACL,EAAGb,EACH,WAAY,QACZ,YAAa,aACb,WAAY,OACZ,KAAMD,EACN,SAAU,EACX,CACL,CAAG,GACe,IAClB,EAEA,SAASQ,EAAcF,EAAM,CAC3B,MAAMW,EAASX,EAAK,IAAIY,GAAQ,CAC9B,KAAM,CACJ,aAAAC,EACA,cAAAC,EACA,KAAAC,EACA,MAAAC,EACA,MAAAC,EACA,SAAAC,EACA,UAAAC,CACD,EAAGP,EACJ,MAAO;AAAA,+CACoCE;AAAA,2BACpBD,UAAqBE;AAAA;AAAA,qEAEqBC;AAAA,qEACAC;AAAA,wEACGC;AAAA,yEACCC;AAAA;AAAA,kBAGzE,CAAG,EAEDC,EAAUT,CAAM,EAChBlB,EAAS,QAAO,CAClB,CAEA,SAAS2B,EAAUT,EAAQ,CACzBA,EAASA,EAAO,KAAK,EAAE,EACvBpB,EAAQ,mBAAmB,YAAaoB,CAAM,EAC9ClB,EAAW,IAAI4B,EAAe,aAAc,CAC1C,aAAc,IACd,aAAc,KAClB,CAAG,CACH"}